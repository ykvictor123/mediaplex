<html><head><base href="."><script src="https://unpkg.com/@popperjs/core@2"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"><title>MediaPlex - Tu Servidor Multimedia</title><style>
:root {
    --primary-color: #e5a00d;
    --secondary-color: #282828;
    --background-dark: #1f1f1f;
    --text-light: #ffffff;
}

body {
    background: var(--background-dark);
    color: var(--text-light);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.sidebar {
    background: var(--secondary-color);
    min-height: 100vh;
    padding: 1rem;
}

.main-content {
    padding: 2rem;
}

.media-card {
    background: var(--secondary-color);
    border-radius: 8px;
    transition: transform 0.2s;
    cursor: pointer;
    height: 300px; /* Fixed height */
    position: relative;
    display: flex;
    flex-direction: column;
}

.media-card:hover {
    transform: scale(1.02);
}

.media-thumbnail {
    position: relative;
    height: 100%; /* Fill parent height */
    background-size: cover;
    background-position: center;
    border-radius: 8px;
    overflow: hidden;
}

.media-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 0.5rem;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    transition: opacity 0.3s;
    max-height: 30%;
    overflow-y: auto;
}

.media-overlay h5 {
    margin-bottom: 0.15rem; /* Reduced margin */
    font-size: 0.9rem; /* Slightly smaller font */
}

.media-overlay p {
    margin-bottom: 0.1rem; /* Reduced margin */
    font-size: 0.75rem; /* Smaller font */
    opacity: 0.8;
}

.media-actions {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    opacity: 0;
    transition: opacity 0.3s;
    display: flex;
    gap: 0.5rem;
}

.media-card:hover .media-actions {
    opacity: 1;
}

.login-container {
    background: var(--secondary-color);
    border-radius: 10px;
    padding: 2rem;
}

.btn-primary {
    background: var(--primary-color);
    border: none;
}

.btn-primary:hover {
    background: #c78c0b;
}

.btn-secondary {
    background: #6c757d;
}

.btn-secondary:hover {
    background: #5a6268;
}

.navbar {
    background: var(--secondary-color);
}

.search-bar {
    background: rgba(255,255,255,0.1);
    border: none;
    color: var(--text-light);
}

.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

.progress-bar {
    background-color: var(--primary-color);
}

.add-content-btn {
    position: absolute;
    right: 1rem;
    top: 0.5rem;
}

.collapse {
    border-top: 1px solid rgba(255,255,255,0.1);
}

.collapse .btn-group .btn {
    padding: 0.2rem 0.4rem;
}

.toast-container {
    z-index: 1050;
}
</style>
<script>
class ContentManager {
    constructor() {
        this.GITHUB_TOKEN = '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';
        this.GITHUB_OWNER = 'YOUR_GITHUB_USERNAME'; // Replace with your GitHub username
        this.GITHUB_REPO = 'YOUR_REPO_NAME'; // Replace with your repository name
        this.TMDB_API_KEY = 'YOUR_TMDB_API_KEY'; // Add your TMDB API key here
        this.TMDB_BASE_URL = 'https://api.themoviedb.org/3';
        this.initializeData();
    }

    async initializeData() {
        try {
            this.movies = await this.getDataFromGithub('movies.json') || [];
            this.series = await this.getDataFromGithub('series.json') || [];
            
            setTimeout(() => {
                this.setupTabHandlers();
                this.showSection('movies');
                this.renderContent('movies');
            }, 0);
        } catch (error) {
            console.error('Error initializing data:', error);
            this.showToast('Error cargando datos desde GitHub', 'error');
        }
    }

    async getDataFromGithub(filename) {
        try {
            const response = await fetch(`https://api.github.com/repos/${this.GITHUB_OWNER}/${this.GITHUB_REPO}/contents/${filename}`, {
                headers: {
                    'Authorization': `Bearer ${this.GITHUB_TOKEN}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            });
            
            if (response.status === 404) {
                return null;
            }
            
            const data = await response.json();
            const content = atob(data.content);
            return JSON.parse(content);
        } catch (error) {
            console.error('Error fetching from GitHub:', error);
            return null;
        }
    }

    async saveDataToGithub(filename, data) {
        try {
            let existingSha;
            try {
                const existing = await fetch(`https://api.github.com/repos/${this.GITHUB_OWNER}/${this.GITHUB_REPO}/contents/${filename}`, {
                    headers: {
                        'Authorization': `Bearer ${this.GITHUB_TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                if (existing.ok) {
                    const existingData = await existing.json();
                    existingSha = existingData.sha;
                }
            } catch (error) {
                // File doesn't exist yet, which is fine
            }

            const content = btoa(JSON.stringify(data, null, 2));
            const body = {
                message: `Update ${filename}`,
                content: content,
                ...(existingSha && { sha: existingSha })
            };

            const response = await fetch(`https://api.github.com/repos/${this.GITHUB_OWNER}/${this.GITHUB_REPO}/contents/${filename}`, {
                method: 'PUT',
                headers: {
                    'Authorization': `Bearer ${this.GITHUB_TOKEN}`,
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(body)
            });

            if (!response.ok) {
                throw new Error(`GitHub API responded with ${response.status}`);
            }
        } catch (error) {
            console.error('Error saving to GitHub:', error);
            this.showToast('Error guardando datos en GitHub', 'error');
        }
    }

    setupTabHandlers() {
        const sidebarLinks = document.querySelectorAll('.sidebar .btn-link');
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const section = e.currentTarget.getAttribute('data-section');
                this.showSection(section);
            });
        });
    }

    normalizeTitle(title) {
        if (!title) return '';
        return title
            .toLowerCase()
            .normalize("NFD")
            .replace(/[\u0300-\u036f]/g, "") 
            .replace(/[^a-z0-9\s]/g, "") 
            .replace(/\s+/g, " ") 
            .trim();
    }

    showSection(section) {
        // Hide all sections first
        const sections = document.querySelectorAll('.content-section');
        sections.forEach(s => s.style.display = 'none');
        
        // Show the requested section
        const targetSection = document.getElementById(`${section}-section`);
        if (targetSection) {
            targetSection.style.display = 'block';
        }
        
        // Update active state in sidebar
        const sidebarLinks = document.querySelectorAll('.sidebar .btn-link');
        sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('data-section') === section) {
                link.classList.add('active');
            }
        });

        // Render content for the section if needed
        this.renderContent(section);
    }

    getSectionName(section) {
        const names = {
            'movies': 'Película',
            'series': 'Serie',
            'music': 'Música',
            'photos': 'Foto'
        };
        return names[section] || section;
    }

    async showAddContentModal(section) {
        const modal = document.createElement('div');
        modal.className = 'modal fade';
        modal.innerHTML = `
            <div class="modal-dialog">
                <div class="modal-content bg-dark">
                    <div class="modal-header">
                        <h5 class="modal-title">Agregar ${this.getSectionName(section)}</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="addContentForm">
                            <div class="mb-3">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="useManualTitle">
                                    <label class="form-check-label" for="useManualTitle">
                                        Usar título manual
                                    </label>
                                </div>
                                <div id="manualTitleInputs" style="display: none;">
                                    <input type="text" class="form-control bg-secondary text-light mb-2" 
                                           name="manualTitle" placeholder="Título">
                                    <input type="text" class="form-control bg-secondary text-light mb-2" 
                                           name="manualYear" placeholder="Año (opcional)">
                                    <input type="text" class="form-control bg-secondary text-light mb-2" 
                                           name="manualQuality" placeholder="Calidad (ej: 1080p)">
                                    <input type="text" class="form-control bg-secondary text-light" 
                                           name="manualLanguage" placeholder="Idioma">
                                </div>
                            </div>
                            ${section === 'series' ? `
                                <div class="mb-3">
                                    <label class="form-label">Nombre de la Serie</label>
                                    <input type="text" class="form-control bg-secondary text-light" name="seriesName" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Temporada</label>
                                    <input type="number" class="form-control bg-secondary text-light" name="season" required min="1">
                                </div>
                            ` : ''}
                            <div class="mb-3">
                                <label class="form-label">Código iframe</label>
                                <textarea class="form-control bg-secondary text-light" name="iframe" rows="5" required></textarea>
                                <small class="text-muted">Puedes pegar varios iframes, uno por línea</small>
                            </div>
                            <div id="metadataPreview" class="mb-3" style="display: none;">
                                <h6>Metadatos detectados:</h6>
                                <div class="metadata-content"></div>
                            </div>
                            <button type="submit" class="btn btn-primary">Guardar</button>
                        </form>
                    </div>
                </div>
            </div>
        `;

        document.body.appendChild(modal);
        const modalInstance = new bootstrap.Modal(modal);
        modalInstance.show();
        
        const useManualTitleCheckbox = modal.querySelector('#useManualTitle');
        const manualTitleInputs = modal.querySelector('#manualTitleInputs');
        useManualTitleCheckbox.addEventListener('change', (e) => {
            manualTitleInputs.style.display = e.target.checked ? 'block' : 'none';
        });
        
        const form = modal.querySelector('form');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const iframeCodes = e.target.iframe.value.split('\n').filter(code => code.trim());
            
            const addedContent = [];
            const skippedContent = [];
            
            for (const iframeCode of iframeCodes) {
                let content;
                if (useManualTitleCheckbox.checked) {
                    content = {
                        title: e.target.manualTitle.value,
                        year: e.target.manualYear.value,
                        quality: e.target.manualQuality.value,
                        language: e.target.manualLanguage.value,
                        iframe: iframeCode,
                        thumbnail: 'https://via.placeholder.com/300x450'
                    };
                    
                    const isDuplicate = this.movies.some(existingItem => {
                        const existingUrl = this.extractIframeUrl(existingItem.iframe);
                        const newUrl = this.extractIframeUrl(iframeCode);
                        return existingUrl === newUrl;
                    });
                    
                    if (!isDuplicate) {
                        this.movies.push(content);
                        addedContent.push(content.title);
                    } else {
                        skippedContent.push(content.title);
                    }
                } else {
                    content = await this.extractMetadata(iframeCode);
                    if (content) {
                        const isDuplicate = this.movies.some(item => {
                            const existingUrl = this.extractIframeUrl(item.iframe);
                            const newUrl = this.extractIframeUrl(iframeCode);
                            return existingUrl === newUrl;
                        });
                        
                        if (!isDuplicate) {
                            this.movies.push(content);
                            addedContent.push(content.title);
                        } else {
                            skippedContent.push(content.title);
                        }
                    }
                }
            }
            
            await this.saveDataToGithub('movies.json', this.movies);
            this.renderContent(section);
            modalInstance.hide();
            modal.remove();

            if (addedContent.length > 0 || skippedContent.length > 0) {
                let message = '';
                if (addedContent.length > 0) {
                    message += `Agregado: ${addedContent.join(', ')}\n`;
                }
                if (skippedContent.length > 0) {
                    message += `Omitido: ${skippedContent.join(', ')} (duplicados)`;
                }
                this.showToast(message, 'info');
            }
        });
        
        modal.addEventListener('hidden.bs.modal', () => {
            modal.remove();
        });
    }

    async extractMetadata(iframeCode) {
        try {
            const parts = iframeCode.split('|').map(part => part.trim());
            let title = parts[0] || '';
            const iframeSrc = parts[1] || iframeCode;

            // Extract basic metadata from title
            const qualityMatch = title.match(/\b(?:1080p|720p|2160p|4K|HDR|60FPS|BRRIP|BDRIP|WEB-DL|TELESYNC)\b/i);
            const quality = qualityMatch ? qualityMatch[0].toUpperCase() : '';
            title = title.replace(/\b(?:1080p|720p|2160p|4K|HDR|60FPS|BRRIP|BDRIP|WEB-DL|TELESYNC)\b/gi, '');

            const languageMatch = title.match(/\b(?:Latino[- ]Inglés|Castellano|Dual|Español)\b/i);
            const language = languageMatch ? languageMatch[0] : '';
            title = title.replace(/\b(?:Latino[- ]Inglés|Castellano|Dual|Español)\b/gi, '');

            const yearMatch = title.match(/[\[\(]?(19|20)\d{2}[\]\)]?/);
            const year = yearMatch ? yearMatch[0].replace(/[\[\]()]/g, '') : '';
            title = title.replace(/[\[\(]?(19|20)\d{2}[\]\)]?/, '');

            // Clean up the title
            title = this.cleanTitle(title);
            const searchTitle = this.normalizeTitle(title);

            // Search TMDB for metadata
            try {
                const searchQuery = encodeURIComponent(searchTitle);
                const response = await fetch(
                    `${this.TMDB_BASE_URL}/search/movie?api_key=${this.TMDB_API_KEY}&query=${searchQuery}&language=es-ES${year ? `&year=${year}` : ''}`
                );
                const data = await response.json();

                if (data.results && data.results.length > 0) {
                    const movie = data.results[0];
                    const detailsResponse = await fetch(
                        `${this.TMDB_BASE_URL}/movie/${movie.id}?api_key=${this.TMDB_API_KEY}&append_to_response=credits&language=es-ES`
                    );
                    const details = await detailsResponse.json();

                    return {
                        title: movie.title,
                        year: movie.release_date?.substring(0, 4),
                        quality: quality,
                        language: language,
                        iframe: iframeSrc,
                        thumbnail: movie.poster_path ? 
                            `https://image.tmdb.org/t/p/w500${movie.poster_path}` : 
                            'https://via.placeholder.com/300x450',
                        overview: movie.overview,
                        rating: movie.vote_average,
                        genres: details.genres?.map(g => g.name),
                        runtime: details.runtime,
                        cast: details.credits?.cast?.slice(0, 5).map(actor => actor.name),
                        director: details.credits?.crew?.find(p => p.job === 'Director')?.name
                    };
                }
            } catch (error) {
                console.error('Error fetching TMDB data:', error);
            }

            // Return basic metadata if TMDB search fails
            return {
                title: title,
                year: year,
                quality: quality,
                language: language,
                iframe: iframeSrc,
                thumbnail: 'https://via.placeholder.com/300x450'
            };
        } catch (error) {
            console.error('Error extracting metadata:', error);
            return null;
        }
    }

    extractIframeUrl(iframeString) {
        if (iframeString.includes('<iframe')) {
            const srcMatch = iframeString.match(/src=["'](.*?)["']/);
            return srcMatch ? srcMatch[1] : '';
        }
        return iframeString.trim();
    }

    async scanLibrary(section, specificIndex = null) {
        // ... existing scanLibrary code ...
    }

    showToast(message, type = 'info') {
        // ... existing showToast code ...
    }

    renderContent(section) {
        const container = document.querySelector(`#${section}-section .row`);
        if (!container) return;

        let items = [];
        switch(section) {
            case 'movies':
                items = this.movies || [];
                break;
            case 'series':
                items = this.series || [];
                break;
            default:
                return;
        }

        if (items.length === 0) {
            container.innerHTML = `
                <div class="alert alert-info w-100">
                    <i class="fas fa-info-circle me-2"></i>No hay ${section === 'movies' ? 'películas' : 'series'} disponibles.
                </div>
            `;
            return;
        }

        container.innerHTML = items.map(item => `
            <div class="col-md-3 mb-4">
                <div class="media-card">
                    <div class="media-thumbnail" style="background-image: url('${item.thumbnail || 'https://via.placeholder.com/300x450'}')">
                        <div class="media-overlay">
                            <h5 class="text-truncate">${item.title}</h5>
                            ${item.year ? `<p>Año: ${item.year}</p>` : ''}
                            ${item.quality ? `<p>Calidad: ${item.quality}</p>` : ''}
                            ${item.language ? `<p>Idioma: ${item.language}</p>` : ''}
                        </div>
                        <div class="media-actions">
                            <button class="btn btn-sm btn-info" onclick="event.stopPropagation(); contentManager.editContent('${section}', '${item.title}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="event.stopPropagation(); contentManager.deleteContent('${section}', '${item.title}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');

        // Update counter badge
        const badge = document.querySelector(`#${section}-section .badge`);
        if (badge) {
            badge.textContent = items.length;
        }
    }

    filterContent(section, filterType, value) {
        let items = [];
        switch(section) {
            case 'movies':
                items = this.movies;
                break;
            case 'series':
                items = this.series;
                break;
            default:
                return;
        }

        let filteredItems = [...items];

        switch(filterType) {
            case 'all':
                // No filtering needed
                break;
            case 'incomplete':
                filteredItems = items.filter(item => 
                    !item.overview || !item.rating || !item.genres || !item.runtime);
                break;
            case 'quality':
                filteredItems = items.filter(item => 
                    item.quality && item.quality.toLowerCase().includes(value.toLowerCase()));
                break;
            case 'language':
                filteredItems = items.filter(item => 
                    item.language && item.language.toLowerCase().includes(value.toLowerCase()));
                break;
        }

        // Temporarily set the filtered items and render
        if (section === 'movies') {
            this.filteredMovies = filteredItems;
        } else if (section === 'series') {
            this.filteredSeries = filteredItems;
        }

        // Update the rendering
        const container = document.querySelector(`#${section}-section .row`);
        if (!container) return;

        if (filteredItems.length === 0) {
            container.innerHTML = `
                <div class="alert alert-info w-100">
                    <i class="fas fa-info-circle me-2"></i>No hay resultados para el filtro seleccionado.
                </div>
            `;
            return;
        }

        container.innerHTML = filteredItems.map(item => `
            <div class="col-md-3 mb-4">
                <div class="media-card">
                    <div class="media-thumbnail" style="background-image: url('${item.thumbnail || 'https://via.placeholder.com/300x450'}')">
                        <div class="media-overlay">
                            <h5 class="text-truncate">${item.title}</h5>
                            ${item.year ? `<p>Año: ${item.year}</p>` : ''}
                            ${item.quality ? `<p>Calidad: ${item.quality}</p>` : ''}
                            ${item.language ? `<p>Idioma: ${item.language}</p>` : ''}
                        </div>
                        <div class="media-actions">
                            <button class="btn btn-sm btn-info" onclick="event.stopPropagation(); contentManager.editContent('${section}', '${item.title}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="event.stopPropagation(); contentManager.deleteContent('${section}', '${item.title}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');

        // Update counter badge
        const badge = document.querySelector(`#${section}-section .badge`);
        if (badge) {
            badge.textContent = filteredItems.length;
        }
    }

    editContent(section, title) {
        // TODO: Implement edit functionality
        console.log(`Editing ${title} in ${section}`);
    }

    deleteContent(section, title) {
        if (confirm(`¿Estás seguro de que deseas eliminar "${title}"?`)) {
            if (section === 'movies') {
                this.movies = this.movies.filter(item => item.title !== title);
                this.saveDataToGithub('movies.json', this.movies);
            } else if (section === 'series') {
                this.series = this.series.filter(item => item.title !== title);
                this.saveDataToGithub('series.json', this.series);
            }
            this.renderContent(section);
            this.showToast(`${title} ha sido eliminado.`, 'success');
        }
    }

    // ... other methods remain unchanged ...
}

document.addEventListener('DOMContentLoaded', () => {
    window.contentManager = new ContentManager();
});
</script>
</head><body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-play-circle text-warning"></i> MediaPlex
            </a>
            <div class="d-flex align-items-center">
                <input type="search" class="form-control search-bar me-2" placeholder="Buscar contenido...">
                <div class="dropdown">
                    <img src="https://via.placeholder.com/40" alt="Avatar de usuario" class="user-avatar" role="button" data-bs-toggle="dropdown">
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Perfil</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Configuración</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Cerrar sesión</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 sidebar">
                <div class="d-flex flex-column">
                    <h6 class="text-uppercase text-muted mb-3">BIBLIOTECA</h6>
                    <a href="#" class="btn btn-link text-light text-start mb-2" data-section="movies"><i class="fas fa-film me-2"></i>Películas</a>
                    <a href="#" class="btn btn-link text-light text-start mb-2" data-section="series"><i class="fas fa-tv me-2"></i>Series</a>
                    <a href="#" class="btn btn-link text-light text-start mb-2" data-section="music"><i class="fas fa-music me-2"></i>Música</a>
                    <a href="#" class="btn btn-link text-light text-start mb-2" data-section="photos"><i class="fas fa-image me-2"></i>Fotos</a>
                    
                    <h6 class="text-uppercase text-muted mb-3 mt-4">ADMINISTRACIÓN</h6>
                    <a href="#" class="btn btn-link text-light text-start mb-2" data-section="users"><i class="fas fa-users me-2"></i>Usuarios</a>
                    <a href="#" class="btn btn-link text-light text-start mb-2" data-section="system"><i class="fas fa-server me-2"></i>Sistema</a>
                </div>
            </div>

            <div class="col-md-10 main-content">
                <div id="movies-section" class="content-section">
                    <div class="position-relative mb-4">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center gap-2">
                                <h4>Películas</h4>
                                <span class="badge bg-primary">${this.movies.length}</span>
                            </div>
                            <div class="d-flex gap-2">
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                        <i class="fas fa-sort"></i> Ordenar
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-dark">
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.sortContent('movies', 'title', 'asc')">Título A-Z</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.sortContent('movies', 'title', 'desc')">Título Z-A</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.sortContent('movies', 'year', 'desc')">Año más reciente</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.sortContent('movies', 'year', 'asc')">Año más antiguo</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.sortContent('movies', 'rating', 'desc')">Mejor valoradas</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                        <i class="fas fa-filter"></i> Filtrar
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-dark">
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.filterContent('movies', 'all')">Todas</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.filterContent('movies', 'incomplete')">Metadata incompleta</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><h6 class="dropdown-header">Calidad</h6></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.filterContent('movies', 'quality', '1080p')">1080p</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.filterContent('movies', 'quality', '720p')">720p</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><h6 class="dropdown-header">Idioma</h6></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.filterContent('movies', 'language', 'Latino')">Latino</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="contentManager.filterContent('movies', 'language', 'Castellano')">Castellano</a></li>
                                    </ul>
                                </div>
                                <button class="btn btn-primary" onclick="contentManager.showAddContentModal('movies')">
                                    <i class="fas fa-plus me-2"></i>Agregar Película
                                </button>
                                <button class="btn btn-secondary" onclick="contentManager.scanLibrary('movies', null, false)">
                                    <i class="fas fa-sync me-2"></i>Actualizar incompletas
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row g-4">
                        <div class="alert alert-info w-100">
                            <i class="fas fa-info-circle me-2"></i>No hay películas disponibles.
                        </div>
                    </div>
                </div>

                <div id="series-section" class="content-section" style="display: none;">
                    <div class="position-relative">
                        <h4 class="mb-4">Series</h4>
                        <button class="btn btn-primary add-content-btn" onclick="contentManager.showAddContentModal('series')">
                            <i class="fas fa-plus me-2"></i>Agregar Serie
                        </button>
                        <button class="btn btn-secondary add-content-btn me-5" onclick="contentManager.scanLibrary('series', null, true)">
                            <i class="fas fa-sync me-2"></i>Actualizar series incompletas
                        </button>
                    </div>
                    <div class="row g-4">
                        <div class="alert alert-info w-100">
                            <i class="fas fa-info-circle me-2"></i>No hay series disponibles.
                        </div>
                    </div>
                </div>

                <div id="music-section" class="content-section" style="display: none;">
                    <h4 class="mb-4">Música</h4>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>No hay música disponible actualmente.
                    </div>
                </div>

                <div id="photos-section" class="content-section" style="display: none;">
                    <h4 class="mb-4">Fotos</h4>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>No hay fotos disponibles actualmente.
                    </div>
                </div>

                <div id="users-section" class="content-section" style="display: none;">
                    <h4 class="mb-4">Gestión de Usuarios</h4>
                    <div class="card bg-secondary">
                        <div class="card-body">
                            <h5 class="mb-3">Usuarios Registrados</h5>
                            <div class="table-responsive">
                                <table class="table table-dark">
                                    <thead>
                                        <tr>
                                            <th>Usuario</th>
                                            <th>Rol</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Admin</td>
                                            <td><span class="badge bg-danger">Administrado</span></td>
                                            <td><span class="badge bg-success">Activo</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></button>
                                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="system-section" class="content-section" style="display: none;">
                    <h4 class="mb-4">Estado del Sistema</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card bg-secondary mb-3">
                                <div class="card-body">
                                    <h5 class="card-title">Uso de Recursos</h5>
                                    <p>CPU: 12%</p>
                                    <p>Memoria: 4.2GB / 16GB</p>
                                    <p>Almacenamiento: 756GB / 2TB</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card bg-secondary">
                                <div class="card-body">
                                    <h5 class="card-title">Información del Servidor</h5>
                                    <p>Versión: 1.0.0</p>
                                    <p>Tiempo activo: 24 días</p>
                                    <p>Última actualización: 2024-02-15</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body></html>